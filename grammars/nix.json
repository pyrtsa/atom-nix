{
    "scopeName": "source.nix", 
    "name": "Nix", 
    "fileTypes": [
        "nix"
    ], 
    "uuid": "0514fd5f-acb6-436d-b42c-7643e6d36c8f", 
    "patterns": [
        {
            "include": "#expression"
        }
    ], 
    "repository": {
        "function-contents": {
            "patterns": [
                {
                    "include": "#bad-reserved"
                }, 
                {
                    "include": "#function-parameter"
                }, 
                {
                    "include": "#others"
                }
            ]
        }, 
        "comment": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "include": "#comment-remark"
                        }
                    ], 
                    "end": "\\*\\/", 
                    "name": "comment.block.nix", 
                    "begin": "/\\*([^*]|\\*[^\\/])*"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#comment-remark"
                        }
                    ], 
                    "end": "$", 
                    "name": "comment.line.number-sign.nix", 
                    "begin": "\\#"
                }
            ]
        }, 
        "attribute-bind": {
            "patterns": [
                {
                    "include": "#attribute-name"
                }, 
                {
                    "include": "#attribute-bind-from-equals"
                }
            ]
        }, 
        "function-header-until-colon-no-arg": {
            "patterns": [
                {
                    "include": "#function-header-open-brace"
                }, 
                {
                    "include": "#function-header-close-brace-no-arg"
                }
            ], 
            "end": "(?=\\:)", 
            "begin": "(?=\\{)"
        }, 
        "string-quoted": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.definition.string.double.end.nix"
                }
            }, 
            "name": "string.quoted.double.nix", 
            "begin": "\\\"", 
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.string.double.start.nix"
                }
            }, 
            "patterns": [
                {
                    "name": "constant.character.escape.nix", 
                    "match": "\\\\."
                }, 
                {
                    "include": "#interpolation"
                }
            ], 
            "end": "\\\""
        }, 
        "attrset-or-function": {
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.attrset-or-function.nix"
                }
            }, 
            "begin": "\\{", 
            "patterns": [
                {
                    "patterns": [
                        {
                            "include": "#attrset-definition-brace-opened"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=(\\s*\\}|\\\"|\\binherit\\b|\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*(\\s*\\.|\\s*=[^=])))"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#function-definition-brace-opened"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=(\\.\\.\\.|\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*\\s*[,?]))"
                }, 
                {
                    "include": "#bad-reserved"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "variable.parameter.function.maybe.nix"
                        }
                    }, 
                    "begin": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*", 
                    "patterns": [
                        {
                            "patterns": [
                                {
                                    "include": "#attrset-definition-brace-opened"
                                }
                            ], 
                            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                            "begin": "(?=\\.)"
                        }, 
                        {
                            "beginCaptures": {
                                "1": {
                                    "name": "keyword.operator.nix"
                                }
                            }, 
                            "begin": "\\s*(\\,)", 
                            "patterns": [
                                {
                                    "include": "#function-definition-brace-opened"
                                }
                            ], 
                            "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                        }, 
                        {
                            "patterns": [
                                {
                                    "include": "#attribute-bind-from-equals"
                                }, 
                                {
                                    "include": "#attrset-definition-brace-opened"
                                }
                            ], 
                            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                            "begin": "(?=\\=)"
                        }, 
                        {
                            "patterns": [
                                {
                                    "include": "#function-parameter-default"
                                }, 
                                {
                                    "beginCaptures": {
                                        "0": {
                                            "name": "keyword.operator.nix"
                                        }
                                    }, 
                                    "begin": "\\,", 
                                    "patterns": [
                                        {
                                            "include": "#function-definition-brace-opened"
                                        }
                                    ], 
                                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                                }
                            ], 
                            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                            "begin": "(?=\\?)"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))"
        }, 
        "parameter-name": {
            "captures": {
                "0": {
                    "name": "variable.parameter.name.nix"
                }
            }, 
            "match": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*"
        }, 
        "function-for-sure": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "include": "#function-definition"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*\\s*[:@]|\\{[^}]*\\}\\s*:|\\{[^#}\"'/=]*[,\\?]))"
                }
            ]
        }, 
        "attrset-for-sure": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "beginCaptures": {
                                "0": {
                                    "name": "keyword.other.nix"
                                }
                            }, 
                            "begin": "\\brec\\b", 
                            "patterns": [
                                {
                                    "include": "#others"
                                }
                            ], 
                            "end": "(?=\\{)"
                        }, 
                        {
                            "include": "#attrset-definition"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=\\brec\\b)"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#attrset-definition"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=\\{\\s*(\\}|[^,?]*(=|;)))"
                }
            ]
        }, 
        "function-parameter-default": {
            "beginCaptures": {
                "0": {
                    "name": "keyword.operator.nix"
                }
            }, 
            "begin": "\\?", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "(?=[,}])"
        }, 
        "attrset-contents": {
            "patterns": [
                {
                    "include": "#attribute-inherit"
                }, 
                {
                    "include": "#bad-reserved"
                }, 
                {
                    "include": "#attribute-bind"
                }, 
                {
                    "include": "#others"
                }
            ]
        }, 
        "parameter-name-and-cont": {
            "beginCaptures": {
                "0": {
                    "name": "variable.parameter.name.nix"
                }
            }, 
            "begin": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*", 
            "patterns": [
                {
                    "include": "#expression-cont"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))"
        }, 
        "if": {
            "patterns": [
                {
                    "endCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "begin": "\\bif\\b", 
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "\\bth(?=en\\b)"
                }, 
                {
                    "endCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "begin": "(?<=th)en\\b", 
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "\\bel(?=se\\b)"
                }, 
                {
                    "endCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "begin": "(?<=el)se\\b", 
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=\\bif\\b)"
        }, 
        "function-header-close-brace-with-arg": {
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.entity.function.nix"
                }
            }, 
            "begin": "\\}", 
            "patterns": [
                {
                    "include": "#function-header-terminal-arg"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=\\:)"
        }, 
        "string": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "endCaptures": {
                                "0": {
                                    "name": "punctuation.definition.string.other.end.nix"
                                }
                            }, 
                            "name": "string.quoted.other.nix", 
                            "begin": "\\'\\'", 
                            "beginCaptures": {
                                "0": {
                                    "name": "punctuation.definition.string.other.start.nix"
                                }
                            }, 
                            "patterns": [
                                {
                                    "name": "constant.character.escape.nix", 
                                    "match": "\\'\\'(\\$|\\'|\\\\.)"
                                }, 
                                {
                                    "include": "#interpolation"
                                }
                            ], 
                            "end": "\\'\\'(?!\\$|\\'|\\\\.)"
                        }, 
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=\\'\\')"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#string-quoted"
                        }, 
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?=\\\")"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "string.unquoted.path.nix"
                        }
                    }, 
                    "begin": "([a-zA-Z0-9\\.\\_\\-\\+]*(\\/[a-zA-Z0-9\\.\\_\\-\\+]+)+)", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "string.unquoted.spath.nix"
                        }
                    }, 
                    "begin": "(\\<[a-zA-Z0-9\\.\\_\\-\\+]+(\\/[a-zA-Z0-9\\.\\_\\-\\+]+)*\\>)", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "string.unquoted.url.nix"
                        }
                    }, 
                    "begin": "([a-zA-Z][a-zA-Z0-9\\+\\-\\.]*\\:[a-zA-Z0-9\\%\\/\\?\\:\\@\\&\\=\\+\\$\\,\\-\\_\\.\\!\\~\\*\\']+)", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }
            ]
        }, 
        "list": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.definition.list.nix"
                }
            }, 
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.list.nix"
                }
            }, 
            "begin": "\\[", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "\\]"
        }, 
        "function-body": {
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(@\\s*([a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)\\s*)?(\\:)"
        }, 
        "comment-remark": {
            "captures": {
                "1": {
                    "name": "markup.bold.comment.nix"
                }
            }, 
            "match": "(TODO|FIXME|BUG|\\!\\!\\!):?"
        }, 
        "function-body-from-colon": {
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.function.nix"
                }
            }, 
            "begin": "(\\:)", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))"
        }, 
        "parens": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.definition.expression.nix"
                }
            }, 
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.expression.nix"
                }
            }, 
            "begin": "\\(", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "\\)"
        }, 
        "function-header-until-colon-with-arg": {
            "patterns": [
                {
                    "include": "#function-header-open-brace"
                }, 
                {
                    "include": "#function-header-close-brace-with-arg"
                }
            ], 
            "end": "(?=\\:)", 
            "begin": "(?=\\{)"
        }, 
        "let": {
            "patterns": [
                {
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "begin": "\\blet\\b", 
                    "patterns": [
                        {
                            "patterns": [
                                {
                                    "patterns": [
                                        {
                                            "include": "#attrset-contents"
                                        }
                                    ], 
                                    "end": "\\}", 
                                    "begin": "\\{"
                                }, 
                                {
                                    "patterns": [
                                        {
                                            "include": "#expression-cont"
                                        }
                                    ], 
                                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                                    "begin": "(^|(?<=\\}))"
                                }, 
                                {
                                    "include": "#others"
                                }
                            ], 
                            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                            "begin": "(?=\\{)"
                        }, 
                        {
                            "include": "#attrset-contents"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(in|else|then)\\b))"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "keyword.other.nix"
                        }
                    }, 
                    "begin": "\\bin\\b", 
                    "patterns": [
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=\\blet\\b)"
        }, 
        "function-header-close-brace-no-arg": {
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.entity.function.nix"
                }
            }, 
            "begin": "\\}", 
            "patterns": [
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=\\:)"
        }, 
        "attribute-name-single": {
            "name": "entity.other.attribute-name.single.nix", 
            "match": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*"
        }, 
        "operator-unary": {
            "name": "keyword.operator.unary.nix", 
            "match": "(!|-)"
        }, 
        "bad-reserved": {
            "name": "invalid.illegal.reserved.nix", 
            "match": "\\b(if|then|else|assert|with|let|in|rec|inherit)\\b"
        }, 
        "others": {
            "patterns": [
                {
                    "include": "#whitespace"
                }, 
                {
                    "include": "#comment"
                }, 
                {
                    "include": "#illegal"
                }
            ]
        }, 
        "interpolation": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.section.embedded.end.nix"
                }
            }, 
            "name": "markup.italic", 
            "begin": "\\$\\{", 
            "beginCaptures": {
                "0": {
                    "name": "punctuation.section.embedded.begin.nix"
                }
            }, 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "\\}"
        }, 
        "attrset-definition-brace-opened": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?<=\\})"
                }, 
                {
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.attrset.nix"
                        }
                    }, 
                    "patterns": [
                        {
                            "include": "#attrset-contents"
                        }
                    ], 
                    "end": "\\}", 
                    "begin": "(?=.?)"
                }
            ]
        }, 
        "illegal": {
            "name": "invalid.illegal", 
            "match": "."
        }, 
        "attribute-inherit": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.terminator.inherit.nix"
                }
            }, 
            "beginCaptures": {
                "0": {
                    "name": "keyword.other.inherit.nix"
                }
            }, 
            "begin": "\\binherit\\b", 
            "patterns": [
                {
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.section.function.arguments.nix"
                        }
                    }, 
                    "begin": "\\(", 
                    "patterns": [
                        {
                            "beginCaptures": {
                                "0": {
                                    "name": "punctuation.section.function.arguments.nix"
                                }
                            }, 
                            "begin": "\\)", 
                            "patterns": [
                                {
                                    "include": "#bad-reserved"
                                }, 
                                {
                                    "include": "#attribute-name-single"
                                }, 
                                {
                                    "include": "#others"
                                }
                            ], 
                            "end": "(?=\\;)"
                        }, 
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "(?=\\;)"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#bad-reserved"
                        }, 
                        {
                            "include": "#attribute-name-single"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=\\;)", 
                    "begin": "(?=[a-zA-Z\\_])"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "\\;"
        }, 
        "attrset-definition": {
            "patterns": [
                {
                    "endCaptures": {
                        "0": {
                            "name": "punctuation.definition.attrset.nix"
                        }
                    }, 
                    "beginCaptures": {
                        "0": {
                            "name": "punctuation.definition.attrset.nix"
                        }
                    }, 
                    "begin": "(\\{)", 
                    "patterns": [
                        {
                            "include": "#attrset-contents"
                        }
                    ], 
                    "end": "(\\})"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
                    "begin": "(?<=\\})"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=\\{)"
        }, 
        "parens-and-cont": {
            "patterns": [
                {
                    "include": "#parens"
                }, 
                {
                    "include": "#expression-cont"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=\\()"
        }, 
        "attribute-name": {
            "patterns": [
                {
                    "name": "entity.other.attribute-name.multipart.nix", 
                    "match": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*"
                }, 
                {
                    "match": "\\."
                }, 
                {
                    "include": "#string-quoted"
                }, 
                {
                    "include": "#interpolation"
                }
            ]
        }, 
        "function-header-open-brace": {
            "beginCaptures": {
                "0": {
                    "name": "punctuation.definition.entity.function.2.nix"
                }
            }, 
            "begin": "\\{", 
            "patterns": [
                {
                    "include": "#function-contents"
                }
            ], 
            "end": "(?=\\})"
        }, 
        "attribute-bind-from-equals": {
            "endCaptures": {
                "0": {
                    "name": "punctuation.terminator.bind.nix"
                }
            }, 
            "beginCaptures": {
                "0": {
                    "name": "keyword.operator.bind.nix"
                }
            }, 
            "begin": "\\=", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "\\;"
        }, 
        "function-header-terminal-arg": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "end": "(?=\\:)", 
                            "name": "variable.parameter.function.3.nix", 
                            "begin": "(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)"
                        }, 
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(?=\\:)", 
                    "begin": "\\@"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=\\:)", 
            "begin": "(?=@)"
        }, 
        "whitespace": {
            "match": "\\s+"
        }, 
        "function-parameter": {
            "patterns": [
                {
                    "patterns": [
                        {
                            "include": "#others"
                        }
                    ], 
                    "end": "(,|(?=\\}))", 
                    "name": "keyword.operator.nix", 
                    "begin": "(\\.\\.\\.)"
                }, 
                {
                    "endCaptures": {
                        "0": {
                            "name": "keyword.operator.nix"
                        }
                    }, 
                    "beginCaptures": {
                        "0": {
                            "name": "variable.parameter.function.1.nix"
                        }
                    }, 
                    "begin": "\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*", 
                    "patterns": [
                        {
                            "include": "#whitespace"
                        }, 
                        {
                            "include": "#comment"
                        }, 
                        {
                            "include": "#function-parameter-default"
                        }, 
                        {
                            "include": "#expression"
                        }
                    ], 
                    "end": "(,|(?=\\}))"
                }, 
                {
                    "include": "#others"
                }
            ]
        }, 
        "expression-cont": {
            "patterns": [
                {
                    "include": "#parens"
                }, 
                {
                    "include": "#list"
                }, 
                {
                    "include": "#string"
                }, 
                {
                    "include": "#interpolation"
                }, 
                {
                    "include": "#function-for-sure"
                }, 
                {
                    "include": "#attrset-for-sure"
                }, 
                {
                    "include": "#attrset-or-function"
                }, 
                {
                    "name": "keyword.operator.nix", 
                    "match": "(\\bor\\b|\\.|==|!=|!|\\<\\=|\\<|\\>\\=|\\>|&&|\\|\\||-\\>|//|\\?|\\+\\+|-|\\*|/(?=([^*]|$))|\\+)"
                }, 
                {
                    "include": "#constants"
                }, 
                {
                    "include": "#bad-reserved"
                }, 
                {
                    "include": "#parameter-name"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=.?)"
        }, 
        "with-assert": {
            "beginCaptures": {
                "0": {
                    "name": "keyword.other.nix"
                }
            }, 
            "begin": "\\b(with|assert)\\b", 
            "patterns": [
                {
                    "include": "#expression"
                }
            ], 
            "end": "\\;"
        }, 
        "function-definition-brace-opened": {
            "patterns": [
                {
                    "include": "#function-body-from-colon"
                }, 
                {
                    "patterns": [
                        {
                            "include": "#function-header-close-brace-with-arg"
                        }, 
                        {
                            "patterns": [
                                {
                                    "include": "#function-contents"
                                }
                            ], 
                            "end": "(?=\\})", 
                            "begin": "(?=.?)"
                        }
                    ], 
                    "end": "(?=\\:)", 
                    "begin": "(?=.?)"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=.?)"
        }, 
        "expression": {
            "patterns": [
                {
                    "include": "#parens-and-cont"
                }, 
                {
                    "include": "#list-and-cont"
                }, 
                {
                    "include": "#string"
                }, 
                {
                    "include": "#interpolation"
                }, 
                {
                    "include": "#with-assert"
                }, 
                {
                    "include": "#function-for-sure"
                }, 
                {
                    "include": "#attrset-for-sure"
                }, 
                {
                    "include": "#attrset-or-function"
                }, 
                {
                    "include": "#let"
                }, 
                {
                    "include": "#if"
                }, 
                {
                    "include": "#operator-unary"
                }, 
                {
                    "include": "#constants"
                }, 
                {
                    "include": "#bad-reserved"
                }, 
                {
                    "include": "#parameter-name-and-cont"
                }, 
                {
                    "include": "#others"
                }
            ]
        }, 
        "function-definition": {
            "patterns": [
                {
                    "include": "#function-body-from-colon"
                }, 
                {
                    "patterns": [
                        {
                            "beginCaptures": {
                                "0": {
                                    "name": "variable.parameter.function.4.nix"
                                }
                            }, 
                            "begin": "(\\b[a-zA-Z\\_][a-zA-Z0-9\\_\\'\\-]*)", 
                            "patterns": [
                                {
                                    "patterns": [
                                        {
                                            "include": "#function-header-until-colon-no-arg"
                                        }, 
                                        {
                                            "include": "#others"
                                        }
                                    ], 
                                    "end": "(?=\\:)", 
                                    "begin": "\\@"
                                }, 
                                {
                                    "include": "#others"
                                }
                            ], 
                            "end": "(?=\\:)"
                        }, 
                        {
                            "patterns": [
                                {
                                    "include": "#function-header-until-colon-with-arg"
                                }
                            ], 
                            "end": "(?=\\:)", 
                            "begin": "(?=\\{)"
                        }
                    ], 
                    "end": "(?=\\:)", 
                    "begin": "(?=.?)"
                }, 
                {
                    "include": "#others"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=.?)"
        }, 
        "list-and-cont": {
            "patterns": [
                {
                    "include": "#list"
                }, 
                {
                    "include": "#expression-cont"
                }
            ], 
            "end": "(?=([\\])};,]|\\b(else|then)\\b))", 
            "begin": "(?=\\[)"
        }, 
        "constants": {
            "patterns": [
                {
                    "beginCaptures": {
                        "0": {
                            "name": "constant.language.nix"
                        }
                    }, 
                    "begin": "\\b(builtins|true|false|null)\\b", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "support.function.nix"
                        }
                    }, 
                    "begin": "\\b(scopedImport|import|isNull|abort|throw|baseNameOf|dirOf|removeAttrs|map|toString|derivationStrict|derivation)\\b", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }, 
                {
                    "beginCaptures": {
                        "0": {
                            "name": "constant.numeric.nix"
                        }
                    }, 
                    "begin": "\\b[0-9]+\\b", 
                    "patterns": [
                        {
                            "include": "#expression-cont"
                        }
                    ], 
                    "end": "(?=([\\])};,]|\\b(else|then)\\b))"
                }
            ]
        }
    }
}